<!DOCTYPE html>
<html lang="lb">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>P4 â€“ A menger FrÃ¤izÃ¤it</title>

  <style>
    /* FONT */
    @font-face{
      font-family:'SchoulschrÃ«ft';
      src:url('https://raw.githubusercontent.com/albrechtclaire1007/schoulschreft/main/schoulschreft_bold%5B2%5D.TTF')
           format('truetype');
      font-weight:bold;
      font-style:normal;
      font-display:swap;
    }

    :root{
      --purple-mid:#b7a2e5;
      --purple-light:#ebe3ff;
      --purple-dark:#6c4aa3;
      --ink:#2d1844;
      --white:#fff;
      --ok:#b7f0c8;
      --bad:#ffcccc;
    }

    *{ margin:0; padding:0; box-sizing:border-box; }

    body{
      font-family:'SchoulschrÃ«ft', system-ui, sans-serif;
      background:var(--purple-light);
      padding:16px;
      color:var(--ink);
      min-height:100vh;
    }

    button{
      font-family:'SchoulschrÃ«ft', system-ui, sans-serif;
      cursor:pointer;
    }

    /* TOP BAR */
    .top-bar{
      max-width:1100px;
      margin:0 auto 8px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      background:var(--purple-mid);
      border-radius:999px;
      padding:4px 10px;
      color:var(--white);
      gap:10px;
    }
    .top-bar-title{
      font-size:1.05rem;
      flex:1;
      text-align:center;
      min-height:1.4em;
      opacity:.95;
    }
    .top-arrow{
      width:28px;
      height:28px;
      display:flex;
      align-items:center;
      justify-content:center;
      border-radius:50%;
      border:2px solid var(--white);
      font-size:1.1rem;
      background:transparent;
      color:var(--white);
    }
    .top-arrow:disabled{
      opacity:0.4;
      cursor:default;
    }

    .subtitle{
      max-width:1100px;
      margin:0 auto 12px;
      text-align:center;
      font-size:0.9rem;
      opacity:0.8;
    }

    .games{
      max-width:1100px;
      margin:0 auto;
    }

    .game{ display:none; }
    .game.active{ display:block; }

    h2{
      font-size:1.1rem;
      margin-bottom:6px;
      text-align:center;
      color:var(--purple-dark);
    }

    /* White rounded instruction box */
    .instruction-box{
      background:var(--white);
      border-radius:18px;
      padding:10px 14px;
      text-align:center;
      font-size:0.95rem;
      margin:0 auto 12px;
      border:2px solid rgba(108,74,163,.15);
    }

    .primary{
      padding:6px 14px;
      border-radius:999px;
      border:2px solid var(--purple-dark);
      background:var(--purple-mid);
      color:var(--white);
      font-size:0.9rem;
    }
    .secondary{
      padding:4px 10px;
      border-radius:999px;
      border:2px solid var(--purple-mid);
      background:white;
      color:var(--ink);
      font-size:0.85rem;
    }

    .row-center{
      display:flex;
      justify-content:center;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      margin: 0 auto 12px;
    }

    .pill{
      background:var(--white);
      border-radius:999px;
      padding:6px 12px;
      border:2px solid rgba(108,74,163,.15);
      font-size:0.9rem;
    }

    .feedback{
      margin-top:6px;
      min-height:1.4em;
      font-size:0.9rem;
      text-align:center;
    }
    .feedback.ok{ color:#117a3a; }
    .feedback.bad{ color:#b02323; }

    /* ===== Shared cards/grids ===== */
    .grid{
      display:grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap:12px;
    }
    .card{
      background:var(--white);
      border-radius:18px;
      padding:10px;
      border:2px solid rgba(108,74,163,.12);
      display:flex;
      align-items:center;
      justify-content:center;
      height:120px;
      user-select:none;
      cursor:pointer;
      transition: transform .08s ease;
      position:relative;
      overflow:hidden;
    }
    .card:active{ transform: scale(.98); }
    .card img{
      width:100%;
      height:100%;
      object-fit:contain;
    }

    /* Flash effects */
    .flash-green{ animation: flashGreen .25s ease; }
    .flash-red{ animation: flashRed .25s ease; }

    @keyframes flashGreen{
      0%{ box-shadow:none; }
      50%{ box-shadow: 0 0 0 6px rgba(183,240,200,.95); }
      100%{ box-shadow:none; }
    }
    @keyframes flashRed{
      0%{ box-shadow:none; }
      50%{ box-shadow: 0 0 0 6px rgba(255,204,204,.95); }
      100%{ box-shadow:none; }
    }

    /* Game 2 word box */
    .word-box{
      background:var(--white);
      border-radius:18px;
      padding:12px 14px;
      text-align:center;
      font-size:1.6rem;
      border:2px solid rgba(108,74,163,.15);
      margin: 0 auto 12px;
    }

    /* Game 3 */
    .g3-wrap{
      display:flex;
      flex-direction:column;
      gap:12px;
      align-items:center;
    }
    .big-img{
      background:var(--white);
      border-radius:18px;
      padding:12px;
      border:2px solid rgba(108,74,163,.15);
      width:min(640px, 100%);
    }
    .big-img img{
      width:100%;
      height:220px;
      object-fit:contain;
    }
    .panel{
      background:var(--white);
      border-radius:18px;
      padding:10px 12px;
      border:2px solid rgba(108,74,163,.15);
      width:min(1000px, 100%);
    }
    .panel-title{
      text-align:center;
      font-size:0.95rem;
      opacity:.85;
      margin-bottom:8px;
    }
    .letters{
      display:flex;
      flex-wrap:wrap;
      justify-content:center;
      gap:10px;
    }
    .letter{
      background:var(--purple-light);
      border:2px solid rgba(108,74,163,.12);
      border-radius:14px;
      padding:8px 12px;
      font-size:1.4rem;
      cursor:pointer; /* click to place */
      user-select:none;
    }
    .letter:active{ transform: scale(.98); }

    .slots{
      display:flex;
      flex-wrap:wrap;
      justify-content:center;
      gap:8px;
      padding-bottom:4px;
    }
    .slot{
      width:44px;
      height:44px;
      border-radius:14px;
      background:#fbfaff;
      border:2px solid rgba(108,74,163,.18);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:1.4rem;
      user-select:none;
      cursor:pointer; /* click to remove when filled */
    }
    .slot.space{
      width:64px;
      background:#f4f0ff;
      border-style:dashed;
      cursor:default;
    }
    .slot.filled{
      background:#fff;
    }
    .slot.badFlash{
      animation: slotBad .35s ease;
      background: rgba(255,204,204,.85);
    }
    @keyframes slotBad{
      0%{ transform:translateX(0); }
      25%{ transform:translateX(-5px); }
      50%{ transform:translateX(5px); }
      75%{ transform:translateX(-3px); }
      100%{ transform:translateX(0); }
    }

    /* Game 4 (words, not images) */
    .g4-top{
      display:flex;
      justify-content:center;
      margin-bottom:10px;
    }
    .drag-word{
      background:var(--white);
      border-radius:18px;
      border:2px solid rgba(108,74,163,.15);
      width:min(520px, 100%);
      min-height:90px;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:16px 12px;
      cursor:grab;
      user-select:none;
      font-size:2.0rem;
      text-align:center;
    }

    .zones{
      display:grid;
      grid-template-columns:1fr;
      gap:12px;
    }
    @media(min-width:900px){
      .zones{ grid-template-columns:1fr 1fr; }
    }
    .zone{
      background:var(--white);
      border-radius:18px;
      border:2px solid rgba(108,74,163,.15);
      padding:10px;
      min-height:220px;
    }
    .zone h3{
      text-align:center;
      color:var(--purple-dark);
      font-size:1.1rem;
      margin-bottom:6px;
    }
    .zone p{
      text-align:center;
      opacity:.75;
      margin-bottom:8px;
      font-size:0.9rem;
    }
    .zone.over{
      outline:4px solid rgba(108,74,163,.18);
      outline-offset:2px;
    }
    .word-pills{
      display:flex;
      flex-wrap:wrap;
      justify-content:center;
      gap:8px;
    }
    .word-pill{
      background:var(--purple-light);
      border:2px solid rgba(108,74,163,.12);
      border-radius:999px;
      padding:6px 10px;
      font-size:1.05rem;
    }

    /* Modal */
    .overlay{
      position:fixed;
      inset:0;
      background:rgba(45,24,68,.25);
      display:none;
      align-items:center;
      justify-content:center;
      padding:16px;
    }
    .overlay.show{ display:flex; }
    .modal{
      background:var(--white);
      border-radius:18px;
      border:2px solid rgba(108,74,163,.18);
      width:min(520px, 100%);
      padding:14px;
      text-align:center;
    }
    .modal h3{
      color:var(--purple-dark);
      font-size:1.4rem;
      margin-bottom:6px;
    }
    .modal p{
      font-size:1.0rem;
      margin-bottom:10px;
      opacity:.9;
    }
  </style>
</head>

<body>

  <div class="top-bar">
    <button class="top-arrow" id="prevBtn" aria-label="Viregt Spill">â€¹</button>
    <div class="top-bar-title" id="topTitle"></div>
    <button class="top-arrow" id="nextBtn" aria-label="NÃ¤chst Spill">â€º</button>
  </div>

  <div class="subtitle">P4 â€“ A menger FrÃ¤izÃ¤it</div>

  <div class="games" id="games">

    <!-- GAME 1 -->
    <section class="game active" id="game1">
      <h2>Lauschter a klick</h2>
      <div class="instruction-box">Lauschter a klick op dat richtegt Bild.</div>

      <div class="row-center">
        <button class="primary" id="g1Replay">ðŸ”Š Lauschter nach eng KÃ©ier</button>
        <div class="pill" id="g1Prog">1 / 24</div>
      </div>

      <div class="grid" id="g1Grid"></div>
      <div class="feedback" id="g1Feedback"></div>
    </section>

    <!-- GAME 2 -->
    <section class="game" id="game2">
      <h2>Lies a klick</h2>
      <div class="instruction-box">Lies dâ€™Wuert a klick op dat richtegt Bild.</div>

      <div class="word-box" id="g2Word">â€”</div>

      <div class="row-center">
        <div class="pill" id="g2Prog">1 / 24</div>
      </div>

      <div class="grid" id="g2Grid"></div>
      <div class="feedback" id="g2Feedback"></div>
    </section>

    <!-- GAME 3 -->
    <section class="game" id="game3">
      <h2>Schreif dâ€™Wuert</h2>
      <div class="instruction-box">Klick dâ€™Buschtawen an der Reiefolleg. Klick op Buschtawen an de KÃ«schte fir ze verbesseren.</div>

      <div class="g3-wrap">
        <div class="big-img"><img id="g3Img" alt=""/></div>

        <div class="panel">
          <div class="panel-title">Buschtawen</div>
          <div class="letters" id="g3Letters"></div>
        </div>

        <div class="panel">
          <div class="panel-title">Reiefolleg</div>
          <div class="slots" id="g3Slots"></div>
        </div>

        <div class="row-center">
          <div class="pill" id="g3Prog">1 / 24</div>
          <button class="secondary" id="g3Reset">Reset</button>
        </div>

        <div class="feedback" id="g3Feedback"></div>
      </div>
    </section>

    <!-- GAME 4 -->
    <section class="game" id="game4">
      <h2>SortÃ©ier</h2>
      <div class="instruction-box">ZÃ©i dâ€™Wuert an dÃ©i richteg KÃ«scht.</div>

      <div class="row-center">
        <div class="pill" id="g4Prog">1 / 24</div>
      </div>

      <div class="g4-top">
        <div class="drag-word" id="g4Card" draggable="true">â€”</div>
      </div>

      <div class="zones">
        <div class="zone" id="zoneRoueg">
          <h3>Roueg AktivitÃ©iten</h3>
          <p>Drop hei</p>
          <div class="word-pills" id="pillsRoueg"></div>
        </div>

        <div class="zone" id="zoneAktiv">
          <h3>Aktiv AktivitÃ©iten</h3>
          <p>Drop hei</p>
          <div class="word-pills" id="pillsAktiv"></div>
        </div>
      </div>

      <div class="feedback" id="g4Feedback"></div>
    </section>

  </div>

  <div class="overlay" id="overlay">
    <div class="modal">
      <h3 id="modalTitle">Bravo!</h3>
      <p id="modalText">Alles fÃ¤erdeg.</p>
      <button class="primary" id="modalBtn">Nach eng KÃ©ier</button>
    </div>
  </div>

<script>
/* ===================== DATA ===================== */
const AUDIO_BASE = "https://github.com/albrechtclaire1007/p4.5fraizait/raw/refs/heads/main/";
const audioUrl = (filename) => AUDIO_BASE + encodeURIComponent(filename);

const items = [
  { word: "boxen", img: "https://i.postimg.cc/DJ3s1CY0/boxen.png", audioFile: "boxen.mp3" },
  { word: "danzen", img: "https://i.postimg.cc/cgGYfD5K/danzen.png", audioFile: "danzen.mp3" },
  { word: "fuere skate", img: "https://i.postimg.cc/PpbDymBf/fuere-skateboard.png", audioFile: "fuere_skate.mp3" },
  { word: "fuere velo", img: "https://i.postimg.cc/cg73hQVL/fuere-velo.png", audioFile: "fuere_velo.mp3" },
  { word: "kachen", img: "https://i.postimg.cc/YGNFR1Jq/kachen.png", audioFile: "kachen.mp3" },
  { word: "kucken telee", img: "https://i.postimg.cc/8Jdv4hqc/kucken-telee.png", audioFile: "kucken_telee.mp3" },
  { word: "lafen", img: "https://i.postimg.cc/0MGSnpLw/lafen.png", audioFile: "lafen.mp3" },
  { word: "lauschtere musek", img: "https://i.postimg.cc/5Y5zgwZw/lauschtere-musek.png", audioFile: "lauschtere musek.mp3" },
  { word: "leieren", img: "https://i.postimg.cc/1n0FBpLK/leieren.png", audioFile: "leieren.mp3" },
  { word: "liesen", img: "https://i.postimg.cc/9RP9bGvx/liesen.png", audioFile: "liesen.mp3" },
  { word: "maache musek", img: "https://i.postimg.cc/ZBPNHr1w/maache-musek.png", audioFile: "maache_musek.mp3" },
  { word: "maache sport", img: "https://i.postimg.cc/K3ZMH12n/maache-sport.png", audioFile: "maache_sport.mp3" },
  { word: "maache yoga", img: "https://i.postimg.cc/JH1k2sL2/maache-yoga.png", audioFile: "maache_yoga.mp3" },
  { word: "molen", img: "https://i.postimg.cc/D42XMSTR/molen.png", audioFile: "molen.mp3" },
  { word: "raschten", img: "https://i.postimg.cc/tnXxMsbH/raschten.png", audioFile: "raschten.mp3" },
  { word: "schwammen", img: "https://i.postimg.cc/Wq2kHdVT/schwammen.png", audioFile: "schwammen.mp3" },
  { word: "spadsÃ©ieren", img: "https://i.postimg.cc/23mh6KZW/spadseieren.png", audioFile: "spadseieren.mp3" },
  { word: "spille basket", img: "https://i.postimg.cc/ThGgw4DS/spille-basket.png", audioFile: "spille_basket.mp3" },
  { word: "spille fussball", img: "https://i.postimg.cc/pyxzT6FS/spille-fussball.png", audioFile: "spille_fussball.mp3" },
  { word: "spille gittar", img: "https://i.postimg.cc/Z0ZpRMdX/spille-gittar.png", audioFile: "spille_gittar.mp3" },
  { word: "spille videospill", img: "https://i.postimg.cc/hhrx71Lp/spille-videospiller.png", audioFile: "spille_videospill.mp3" },
  { word: "spillen", img: "https://i.postimg.cc/z3jWRFCc/spillen.png", audioFile: "spillen.mp3" },
  { word: "telefoneieren", img: "https://i.postimg.cc/NL4Trk6Z/telefoneieren.png", audioFile: "telefoneieren.mp3" },
  { word: "turnen", img: "https://i.postimg.cc/Yj3gmzN7/turnen.png", audioFile: "turnen.mp3" }
];

function shuffle(arr){
  const a = arr.slice();
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}

function flash(el, cls){
  el.classList.remove("flash-green","flash-red");
  void el.offsetWidth;
  el.classList.add(cls);
}

let currentAudio = null;
function stopAudio(){
  if(currentAudio){
    try{ currentAudio.pause(); }catch(e){}
    currentAudio = null;
  }
}

/* ===================== NAV ===================== */
const gameEls = Array.from(document.querySelectorAll(".game"));
let gameIndex = 0;

function showGame(idx){
  stopAudio();
  gameEls.forEach((g,i)=>g.classList.toggle("active", i===idx));
  gameIndex = idx;
  document.getElementById("topTitle").textContent = ""; // arrows only feel

  if(idx===0) g1Render(true);
  if(idx===1) g2Render();
  if(idx===2) g3Render();
  if(idx===3) g4Render();
}

document.getElementById("prevBtn").addEventListener("click", ()=>{
  showGame((gameIndex + gameEls.length - 1) % gameEls.length);
});
document.getElementById("nextBtn").addEventListener("click", ()=>{
  showGame((gameIndex + 1) % gameEls.length);
});

/* ===================== MODAL ===================== */
const overlay = document.getElementById("overlay");
function showModal(title, text, onRestart){
  document.getElementById("modalTitle").textContent = title;
  document.getElementById("modalText").textContent = text;
  overlay.classList.add("show");
  document.getElementById("modalBtn").onclick = ()=>{
    overlay.classList.remove("show");
    onRestart();
  };
}

/* ===================== GAME 1 ===================== */
let g1Order = shuffle(items);
let g1Pos = 0;

function g1Play(){
  const target = g1Order[g1Pos];
  stopAudio();
  currentAudio = new Audio(audioUrl(target.audioFile));
  currentAudio.play().catch(()=>{});
}

function g1Render(autoPlay){
  const fb = document.getElementById("g1Feedback");
  fb.textContent = "";
  fb.className = "feedback";
  document.getElementById("g1Prog").textContent = `${g1Pos+1} / ${items.length}`;

  const grid = document.getElementById("g1Grid");
  grid.innerHTML = "";

  items.forEach(it=>{
    const card = document.createElement("div");
    card.className = "card";
    const img = document.createElement("img");
    img.src = it.img;
    img.alt = it.word;
    card.appendChild(img);

    card.addEventListener("click", ()=>{
      const target = g1Order[g1Pos];
      if(it.word === target.word){
        flash(card, "flash-green");
        g1Pos++;
        if(g1Pos >= g1Order.length){
          stopAudio();
          showModal("Bravo!", "Du hues alles richteg!", ()=>{
            g1Order = shuffle(items);
            g1Pos = 0;
            g1Render(true);
          });
          return;
        }
        g1Render(true);
      }else{
        flash(card, "flash-red");
      }
    });

    grid.appendChild(card);
  });

  document.getElementById("g1Replay").onclick = ()=> g1Play();
  if(autoPlay) g1Play();
}

/* ===================== GAME 2 ===================== */
let g2Order = shuffle(items);
let g2Pos = 0;

function g2Render(){
  const fb = document.getElementById("g2Feedback");
  fb.textContent = "";
  fb.className = "feedback";

  const target = g2Order[g2Pos];
  document.getElementById("g2Prog").textContent = `${g2Pos+1} / ${items.length}`;
  document.getElementById("g2Word").textContent = target.word;

  const grid = document.getElementById("g2Grid");
  grid.innerHTML = "";

  items.forEach(it=>{
    const card = document.createElement("div");
    card.className = "card";
    const img = document.createElement("img");
    img.src = it.img;
    img.alt = it.word;
    card.appendChild(img);

    card.addEventListener("click", ()=>{
      if(it.word === target.word){
        flash(card, "flash-green");
        g2Pos++;
        if(g2Pos >= g2Order.length){
          showModal("Bravo!", "Du hues alles richteg!", ()=>{
            g2Order = shuffle(items);
            g2Pos = 0;
            g2Render();
          });
          return;
        }
        g2Render();
      }else{
        flash(card, "flash-red");
      }
    });

    grid.appendChild(card);
  });
}

/* ===================== GAME 3 (click-to-place, removable, allow wrong) ===================== */
let g3Order = shuffle(items);
let g3Pos = 0;

function g3Render(){
  const fb = document.getElementById("g3Feedback");
  fb.textContent = "";
  fb.className = "feedback";

  const target = g3Order[g3Pos];
  document.getElementById("g3Prog").textContent = `${g3Pos+1} / ${items.length}`;
  document.getElementById("g3Img").src = target.img;
  document.getElementById("g3Img").alt = target.word;

  const required = target.word;     // strict target
  const expected = required.split(""); // includes spaces

  const lettersEl = document.getElementById("g3Letters");
  const slotsEl = document.getElementById("g3Slots");
  lettersEl.innerHTML = "";
  slotsEl.innerHTML = "";

  // Slot objects: {expected, char|null, locked(bool)}
  const slots = expected.map(ch => ({
    expected: ch,
    char: (ch === " ") ? " " : null,
    locked: (ch === " ")
  }));

  // Build slots UI
  const slotEls = slots.map((s, idx) => {
    const slot = document.createElement("div");
    slot.className = "slot";
    if(s.locked) slot.classList.add("space");
    slot.dataset.index = idx;

    // click on filled (non-space) removes it
    slot.addEventListener("click", () => {
      if(s.locked) return;
      if(s.char === null) return;

      // return letter to pool
      addLetterTile(s.char);
      s.char = null;
      slot.textContent = "";
      slot.classList.remove("filled");
    });

    slotsEl.appendChild(slot);
    return slot;
  });

  // Letters pool (no spaces)
  const poolChars = shuffle(expected.filter(c => c !== " "));
  poolChars.forEach(ch => addLetterTile(ch));

  function firstEmptySlotIndex(){
    for(let i=0;i<slots.length;i++){
      if(slots[i].locked) continue;
      if(slots[i].char === null) return i;
    }
    return -1;
  }

  function addLetterTile(ch){
    const tile = document.createElement("div");
    tile.className = "letter";
    tile.textContent = ch;
    tile.dataset.char = ch;

    tile.addEventListener("click", () => {
      const idx = firstEmptySlotIndex();
      if(idx === -1) return;

      // place (can be wrong, allowed)
      slots[idx].char = ch;
      slotEls[idx].textContent = ch;
      slotEls[idx].classList.add("filled");
      tile.remove();

      // if all filled, validate and auto-remove wrong ones
      if(isAllFilled()){
        validateAndAutoRemoveWrong();
      }
    });

    lettersEl.appendChild(tile);
  }

  function isAllFilled(){
    return slots.every(s => s.locked || s.char !== null);
  }

  function validateAndAutoRemoveWrong(){
    // Compare every non-space slot
    const wrongIdx = [];
    for(let i=0;i<slots.length;i++){
      if(slots[i].locked) continue;
      if(slots[i].char !== slots[i].expected){
        wrongIdx.push(i);
      }
    }

    if(wrongIdx.length === 0){
      // Fully correct â†’ next word
      showModal("Bravo!", "Alles richteg!", () => {
        g3Pos++;
        if(g3Pos >= g3Order.length){
          g3Order = shuffle(items);
          g3Pos = 0;
        }
        g3Render();
      });
      return;
    }

    // Flash wrong ones red
    wrongIdx.forEach(i => {
      slotEls[i].classList.add("badFlash");
    });

    // After flash, remove wrong letters and return them to pool
    setTimeout(() => {
      wrongIdx.forEach(i => {
        slotEls[i].classList.remove("badFlash");
        const wrongChar = slots[i].char;
        slots[i].char = null;
        slotEls[i].textContent = "";
        slotEls[i].classList.remove("filled");
        addLetterTile(wrongChar);
      });
    }, 420);
  }

  document.getElementById("g3Reset").onclick = () => g3Render();
}

/* ===================== GAME 4 (words sorting) ===================== */
const ROUEG_SET = new Set([
  "liesen",
  "lauschtere musek",
  "kucken telee",
  "raschten",
  "leieren",
  "molen",
  "spille videospill",
  "telefoneieren"
]);

let g4Order = shuffle(items);
let g4Pos = 0;

function addWordPill(containerId, word){
  const p = document.createElement("div");
  p.className = "word-pill";
  p.textContent = word;
  document.getElementById(containerId).appendChild(p);
}

function g4Render(){
  const fb = document.getElementById("g4Feedback");
  fb.textContent = "";
  fb.className = "feedback";

  const target = g4Order[g4Pos];
  document.getElementById("g4Prog").textContent = `${g4Pos+1} / ${items.length}`;

  const card = document.getElementById("g4Card");
  card.textContent = target.word;
  card.setAttribute("draggable","true");

  card.ondragstart = (e)=>{
    e.dataTransfer.setData("text/plain", target.word);
  };

  const zoneRoueg = document.getElementById("zoneRoueg");
  const zoneAktiv = document.getElementById("zoneAktiv");

  function setOver(el, over){ el.classList.toggle("over", over); }

  [zoneRoueg, zoneAktiv].forEach(zone=>{
    zone.ondragover = (e)=>{ e.preventDefault(); setOver(zone,true); };
    zone.ondragleave = ()=> setOver(zone,false);
    zone.ondrop = (e)=>{
      e.preventDefault();
      setOver(zone,false);

      const droppedWord = e.dataTransfer.getData("text/plain");
      const correctKind = ROUEG_SET.has(droppedWord) ? "roueg" : "aktiv";
      const droppedTo = (zone.id === "zoneRoueg") ? "roueg" : "aktiv";

      if(correctKind === droppedTo){
        if(droppedTo==="roueg") addWordPill("pillsRoueg", droppedWord);
        else addWordPill("pillsAktiv", droppedWord);

        g4Pos++;
        if(g4Pos >= g4Order.length){
          showModal("Bravo!", "Alles sortÃ©iert!", ()=>{
            document.getElementById("pillsRoueg").innerHTML = "";
            document.getElementById("pillsAktiv").innerHTML = "";
            g4Order = shuffle(items);
            g4Pos = 0;
            g4Render();
          });
          return;
        }
        g4Render();
      }else{
        fb.textContent = "ProbÃ©ier nach eng KÃ©ier.";
        fb.className = "feedback bad";
      }
    };
  });
}

/* ===================== START ===================== */
showGame(0);
</script>

</body>
</html>

